<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Error handling | emnapi</title>
    <meta name="description" content="emnapi - The Subset of Node-API implementation for WebAssembly">
    <link rel="preload stylesheet" href="/emnapi-docs/assets/style.5fa5a060.css" as="style">
    
    <script type="module" src="/emnapi-docs/assets/app.418ac9ce.js"></script>
    <link rel="preload" href="/emnapi-docs/assets/inter-roman-latin.2ed14f66.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/emnapi-docs/assets/chunks/framework.957b8f8c.js">
    <link rel="modulepreload" href="/emnapi-docs/assets/chunks/theme.2dd96335.js">
    <link rel="modulepreload" href="/emnapi-docs/assets/guide_error-handling.md.ea0d57ee.lean.js">
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-5a346dfe><!--[--><!--]--><!--[--><span tabindex="-1" data-v-0f60ec36></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-0f60ec36> Skip to content </a><!--]--><!----><header class="VPNav" data-v-5a346dfe data-v-ae24b3ad><div class="VPNavBar has-sidebar" data-v-ae24b3ad data-v-a0fd61f4><div class="container" data-v-a0fd61f4><div class="title" data-v-a0fd61f4><div class="VPNavBarTitle has-sidebar" data-v-a0fd61f4 data-v-86d1bed8><a class="title" href="/emnapi-docs/" data-v-86d1bed8><!--[--><!--]--><!--[--><img class="VPImage logo" src="/emnapi-docs/emnapi.svg" alt data-v-8426fc1a><!--]--><!--[-->emnapi<!--]--><!--[--><!--]--></a></div></div><div class="content" data-v-a0fd61f4><div class="curtain" data-v-a0fd61f4></div><div class="content-body" data-v-a0fd61f4><!--[--><!--]--><div class="VPNavBarSearch search" data-v-a0fd61f4><!--[--><!----><div id="docsearch"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg class="DocSearch-Search-Icon" width="20" height="20" viewBox="0 0 20 20" aria-label="search icon"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-a0fd61f4 data-v-7f418b0f><span id="main-nav-aria-label" class="visually-hidden" data-v-7f418b0f>Main Navigation</span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink active" href="/emnapi-docs/guide/" tabindex="0" data-v-7f418b0f data-v-42ef59de><!--[--><span data-v-42ef59de>Guide</span><!--]--></a><!--]--><!--[--><a class="VPLink link vp-external-link-icon VPNavBarMenuLink" href="https://github.com/toyobayashi/node-addon-examples" target="_blank" rel="noreferrer" tabindex="0" data-v-7f418b0f data-v-42ef59de><!--[--><span data-v-42ef59de>Examples</span><!--]--></a><!--]--><!--[--><a class="VPLink link vp-external-link-icon VPNavBarMenuLink" href="https://github.com/toyobayashi/emnapi-docs" target="_blank" rel="noreferrer" tabindex="0" data-v-7f418b0f data-v-42ef59de><!--[--><span data-v-42ef59de>Docs Repo</span><!--]--></a><!--]--><!--]--></nav><div class="VPFlyout VPNavBarTranslations translations" data-v-a0fd61f4 data-v-74abcbb9 data-v-9c007e85><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="Change language" data-v-9c007e85><span class="text" data-v-9c007e85><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="option-icon" data-v-9c007e85><path d="M0 0h24v24H0z" fill="none"></path><path d=" M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z " class="css-c4d79v"></path></svg><!----><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="text-icon" data-v-9c007e85><path d="M12,16c-0.3,0-0.5-0.1-0.7-0.3l-6-6c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l5.3,5.3l5.3-5.3c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-6,6C12.5,15.9,12.3,16,12,16z"></path></svg></span></button><div class="menu" data-v-9c007e85><div class="VPMenu" data-v-9c007e85 data-v-e7ea1737><!----><!--[--><!--[--><div class="items" data-v-74abcbb9><p class="title" data-v-74abcbb9>English</p><!--[--><div class="VPMenuLink" data-v-74abcbb9 data-v-43f1e123><a class="VPLink link" href="/emnapi-docs/zh/guide/error-handling.html" data-v-43f1e123><!--[-->简体中文<!--]--></a></div><!--]--></div><!--]--><!--]--></div></div></div><div class="VPNavBarAppearance appearance" data-v-a0fd61f4 data-v-e6aabb21><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="toggle dark mode" aria-checked="false" data-v-e6aabb21 data-v-ce54a7d1 data-v-b1685198><span class="check" data-v-b1685198><span class="icon" data-v-b1685198><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-ce54a7d1><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-ce54a7d1><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-a0fd61f4 data-v-0394ad82 data-v-7bc22406><!--[--><a class="VPSocialLink no-icon" href="https://github.com/toyobayashi/emnapi" aria-label="github" target="_blank" rel="noopener" data-v-7bc22406 data-v-f80f8133><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-a0fd61f4 data-v-40855f84 data-v-9c007e85><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-9c007e85><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="icon" data-v-9c007e85><circle cx="12" cy="12" r="2"></circle><circle cx="19" cy="12" r="2"></circle><circle cx="5" cy="12" r="2"></circle></svg></button><div class="menu" data-v-9c007e85><div class="VPMenu" data-v-9c007e85 data-v-e7ea1737><!----><!--[--><!--[--><div class="group translations" data-v-40855f84><p class="trans-title" data-v-40855f84>English</p><!--[--><div class="VPMenuLink" data-v-40855f84 data-v-43f1e123><a class="VPLink link" href="/emnapi-docs/zh/guide/error-handling.html" data-v-43f1e123><!--[-->简体中文<!--]--></a></div><!--]--></div><div class="group" data-v-40855f84><div class="item appearance" data-v-40855f84><p class="label" data-v-40855f84>Appearance</p><div class="appearance-action" data-v-40855f84><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="toggle dark mode" aria-checked="false" data-v-40855f84 data-v-ce54a7d1 data-v-b1685198><span class="check" data-v-b1685198><span class="icon" data-v-b1685198><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-ce54a7d1><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-ce54a7d1><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></div></div></div><div class="group" data-v-40855f84><div class="item social-links" data-v-40855f84><div class="VPSocialLinks social-links-list" data-v-40855f84 data-v-7bc22406><!--[--><a class="VPSocialLink no-icon" href="https://github.com/toyobayashi/emnapi" aria-label="github" target="_blank" rel="noopener" data-v-7bc22406 data-v-f80f8133><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-a0fd61f4 data-v-e5dd9c1c><span class="container" data-v-e5dd9c1c><span class="top" data-v-e5dd9c1c></span><span class="middle" data-v-e5dd9c1c></span><span class="bottom" data-v-e5dd9c1c></span></span></button></div></div></div></div><!----></header><div class="VPLocalNav reached-top" data-v-5a346dfe data-v-79c8c1df><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-79c8c1df><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="menu-icon" data-v-79c8c1df><path d="M17,11H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h14c0.6,0,1,0.4,1,1S17.6,11,17,11z"></path><path d="M21,7H3C2.4,7,2,6.6,2,6s0.4-1,1-1h18c0.6,0,1,0.4,1,1S21.6,7,21,7z"></path><path d="M21,15H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h18c0.6,0,1,0.4,1,1S21.6,15,21,15z"></path><path d="M17,19H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h14c0.6,0,1,0.4,1,1S17.6,19,17,19z"></path></svg><span class="menu-text" data-v-79c8c1df>Menu</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-79c8c1df data-v-1c15a60a><button data-v-1c15a60a>Return to top</button><!----></div></div><aside class="VPSidebar" data-v-5a346dfe data-v-b00e2fdd><div class="curtain" data-v-b00e2fdd></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-b00e2fdd><span class="visually-hidden" id="sidebar-aria-label" data-v-b00e2fdd> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="group" data-v-b00e2fdd><section class="VPSidebarItem level-0 has-active" data-v-b00e2fdd data-v-e31bd47b><div class="item" role="button" tabindex="0" data-v-e31bd47b><div class="indicator" data-v-e31bd47b></div><h2 class="text" data-v-e31bd47b>Guide</h2><!----></div><div class="items" data-v-e31bd47b><!--[--><div class="VPSidebarItem level-1 is-link" data-v-e31bd47b data-v-e31bd47b><div class="item" data-v-e31bd47b><div class="indicator" data-v-e31bd47b></div><a class="VPLink link link" href="/emnapi-docs/guide/" data-v-e31bd47b><!--[--><p class="text" data-v-e31bd47b>Introduction</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-e31bd47b data-v-e31bd47b><div class="item" data-v-e31bd47b><div class="indicator" data-v-e31bd47b></div><a class="VPLink link link" href="/emnapi-docs/guide/getting-started.html" data-v-e31bd47b><!--[--><p class="text" data-v-e31bd47b>Getting Started</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-e31bd47b data-v-e31bd47b><div class="item" data-v-e31bd47b><div class="indicator" data-v-e31bd47b></div><a class="VPLink link link" href="/emnapi-docs/guide/using-cpp.html" data-v-e31bd47b><!--[--><p class="text" data-v-e31bd47b>Using C++ and node-addon-api</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-e31bd47b data-v-e31bd47b><div class="item" data-v-e31bd47b><div class="indicator" data-v-e31bd47b></div><a class="VPLink link link" href="/emnapi-docs/guide/using-cmake.html" data-v-e31bd47b><!--[--><p class="text" data-v-e31bd47b>Using CMake</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-e31bd47b data-v-e31bd47b><div class="item" data-v-e31bd47b><div class="indicator" data-v-e31bd47b></div><a class="VPLink link link" href="/emnapi-docs/guide/using-rust.html" data-v-e31bd47b><!--[--><p class="text" data-v-e31bd47b>Using Rust (Experimental)</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-e31bd47b data-v-e31bd47b><div class="item" data-v-e31bd47b><div class="indicator" data-v-e31bd47b></div><a class="VPLink link link" href="/emnapi-docs/guide/error-handling.html" data-v-e31bd47b><!--[--><p class="text" data-v-e31bd47b>Error Handling</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-e31bd47b data-v-e31bd47b><div class="item" data-v-e31bd47b><div class="indicator" data-v-e31bd47b></div><a class="VPLink link link" href="/emnapi-docs/guide/function-binding.html" data-v-e31bd47b><!--[--><p class="text" data-v-e31bd47b>Function Binding</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-e31bd47b data-v-e31bd47b><div class="item" data-v-e31bd47b><div class="indicator" data-v-e31bd47b></div><a class="VPLink link link" href="/emnapi-docs/guide/class-binding.html" data-v-e31bd47b><!--[--><p class="text" data-v-e31bd47b>Class Binding</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="group" data-v-b00e2fdd><section class="VPSidebarItem level-0" data-v-b00e2fdd data-v-e31bd47b><div class="item" role="button" tabindex="0" data-v-e31bd47b><div class="indicator" data-v-e31bd47b></div><h2 class="text" data-v-e31bd47b>Advanced</h2><!----></div><div class="items" data-v-e31bd47b><!--[--><div class="VPSidebarItem level-1 is-link" data-v-e31bd47b data-v-e31bd47b><div class="item" data-v-e31bd47b><div class="indicator" data-v-e31bd47b></div><a class="VPLink link link" href="/emnapi-docs/guide/modularization.html" data-v-e31bd47b><!--[--><p class="text" data-v-e31bd47b>Modularization</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-e31bd47b data-v-e31bd47b><div class="item" data-v-e31bd47b><div class="indicator" data-v-e31bd47b></div><a class="VPLink link link" href="/emnapi-docs/guide/multithreaded-async.html" data-v-e31bd47b><!--[--><p class="text" data-v-e31bd47b>Multithreaded Asynchronous Operations</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-e31bd47b data-v-e31bd47b><div class="item" data-v-e31bd47b><div class="indicator" data-v-e31bd47b></div><a class="VPLink link link" href="/emnapi-docs/guide/tsfn.html" data-v-e31bd47b><!--[--><p class="text" data-v-e31bd47b>Thread Safe Function</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-e31bd47b data-v-e31bd47b><div class="item" data-v-e31bd47b><div class="indicator" data-v-e31bd47b></div><a class="VPLink link link" href="/emnapi-docs/guide/faq.html" data-v-e31bd47b><!--[--><p class="text" data-v-e31bd47b>FAQ</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="group" data-v-b00e2fdd><section class="VPSidebarItem level-0" data-v-b00e2fdd data-v-e31bd47b><div class="item" role="button" tabindex="0" data-v-e31bd47b><div class="indicator" data-v-e31bd47b></div><h2 class="text" data-v-e31bd47b>API</h2><!----></div><div class="items" data-v-e31bd47b><!--[--><div class="VPSidebarItem level-1 is-link" data-v-e31bd47b data-v-e31bd47b><div class="item" data-v-e31bd47b><div class="indicator" data-v-e31bd47b></div><a class="VPLink link link" href="/emnapi-docs/reference/list.html" data-v-e31bd47b><!--[--><p class="text" data-v-e31bd47b>API List</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-e31bd47b data-v-e31bd47b><div class="item" data-v-e31bd47b><div class="indicator" data-v-e31bd47b></div><a class="VPLink link link" href="/emnapi-docs/reference/additional.html" data-v-e31bd47b><!--[--><p class="text" data-v-e31bd47b>Additional APIs</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-5a346dfe data-v-669faec9><div class="VPDoc has-sidebar has-aside" data-v-669faec9 data-v-6b87e69f><!--[--><!--]--><div class="container" data-v-6b87e69f><div class="aside" data-v-6b87e69f><div class="aside-curtain" data-v-6b87e69f></div><div class="aside-container" data-v-6b87e69f><div class="aside-content" data-v-6b87e69f><div class="VPDocAside" data-v-6b87e69f data-v-3f215769><!--[--><!--]--><!--[--><!--]--><div class="VPDocAsideOutline" role="navigation" data-v-3f215769 data-v-d330b1bb><div class="content" data-v-d330b1bb><div class="outline-marker" data-v-d330b1bb></div><div class="outline-title" role="heading" aria-level="2" data-v-d330b1bb>On this page</div><nav aria-labelledby="doc-outline-aria-label" data-v-d330b1bb><span class="visually-hidden" id="doc-outline-aria-label" data-v-d330b1bb> Table of Contents for current page </span><ul class="root" data-v-d330b1bb data-v-d0ee3533><!--[--><!--]--></ul></nav></div></div><!--[--><!--]--><div class="spacer" data-v-3f215769></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-6b87e69f><div class="content-container" data-v-6b87e69f><!--[--><!--]--><!----><main class="main" data-v-6b87e69f><div style="position:relative;" class="vp-doc _emnapi-docs_guide_error-handling" data-v-6b87e69f><div><h1 id="error-handling" tabindex="-1">Error handling <a class="header-anchor" href="#error-handling" aria-label="Permalink to &quot;Error handling&quot;">​</a></h1><p>The content of this section refers:</p><ul><li><a href="https://nodejs.org/dist/v16.15.0/docs/api/n-api.html#error-handling" target="_blank" rel="noreferrer">Node-API documentation</a></li><li><a href="https://github.com/nodejs/node-addon-api/blob/v5.0.0/doc/error_handling.md" target="_blank" rel="noreferrer">node-addon-api documentation</a></li></ul><h2 id="node-api" tabindex="-1">Node-API <a class="header-anchor" href="#node-api" aria-label="Permalink to &quot;Node-API&quot;">​</a></h2><h3 id="return-values" tabindex="-1">Return Values <a class="header-anchor" href="#return-values" aria-label="Permalink to &quot;Return Values&quot;">​</a></h3><p>All of the Node-API functions share the same error handling pattern. The return type of all API functions is <code>napi_status</code>.</p><div class="language-c vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">c</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">typedef</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">enum</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">  napi_ok,</span></span>
<span class="line"><span style="color:#E1E4E8;">  napi_invalid_arg,</span></span>
<span class="line"><span style="color:#E1E4E8;">  napi_object_expected,</span></span>
<span class="line"><span style="color:#E1E4E8;">  napi_string_expected,</span></span>
<span class="line"><span style="color:#E1E4E8;">  napi_name_expected,</span></span>
<span class="line"><span style="color:#E1E4E8;">  napi_function_expected,</span></span>
<span class="line"><span style="color:#E1E4E8;">  napi_number_expected,</span></span>
<span class="line"><span style="color:#E1E4E8;">  napi_boolean_expected,</span></span>
<span class="line"><span style="color:#E1E4E8;">  napi_array_expected,</span></span>
<span class="line"><span style="color:#E1E4E8;">  napi_generic_failure,</span></span>
<span class="line"><span style="color:#E1E4E8;">  napi_pending_exception,</span></span>
<span class="line"><span style="color:#E1E4E8;">  napi_cancelled,</span></span>
<span class="line"><span style="color:#E1E4E8;">  napi_escape_called_twice,</span></span>
<span class="line"><span style="color:#E1E4E8;">  napi_handle_scope_mismatch,</span></span>
<span class="line"><span style="color:#E1E4E8;">  napi_callback_scope_mismatch,</span></span>
<span class="line"><span style="color:#E1E4E8;">  napi_queue_full,</span></span>
<span class="line"><span style="color:#E1E4E8;">  napi_closing,</span></span>
<span class="line"><span style="color:#E1E4E8;">  napi_bigint_expected,</span></span>
<span class="line"><span style="color:#E1E4E8;">  napi_date_expected,</span></span>
<span class="line"><span style="color:#E1E4E8;">  napi_arraybuffer_expected,</span></span>
<span class="line"><span style="color:#E1E4E8;">  napi_detachable_arraybuffer_expected,</span></span>
<span class="line"><span style="color:#E1E4E8;">  napi_would_deadlock,</span><span style="color:#6A737D;">  /* unused */</span></span>
<span class="line"><span style="color:#E1E4E8;">} napi_status;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">typedef</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">enum</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">  napi_ok,</span></span>
<span class="line"><span style="color:#24292E;">  napi_invalid_arg,</span></span>
<span class="line"><span style="color:#24292E;">  napi_object_expected,</span></span>
<span class="line"><span style="color:#24292E;">  napi_string_expected,</span></span>
<span class="line"><span style="color:#24292E;">  napi_name_expected,</span></span>
<span class="line"><span style="color:#24292E;">  napi_function_expected,</span></span>
<span class="line"><span style="color:#24292E;">  napi_number_expected,</span></span>
<span class="line"><span style="color:#24292E;">  napi_boolean_expected,</span></span>
<span class="line"><span style="color:#24292E;">  napi_array_expected,</span></span>
<span class="line"><span style="color:#24292E;">  napi_generic_failure,</span></span>
<span class="line"><span style="color:#24292E;">  napi_pending_exception,</span></span>
<span class="line"><span style="color:#24292E;">  napi_cancelled,</span></span>
<span class="line"><span style="color:#24292E;">  napi_escape_called_twice,</span></span>
<span class="line"><span style="color:#24292E;">  napi_handle_scope_mismatch,</span></span>
<span class="line"><span style="color:#24292E;">  napi_callback_scope_mismatch,</span></span>
<span class="line"><span style="color:#24292E;">  napi_queue_full,</span></span>
<span class="line"><span style="color:#24292E;">  napi_closing,</span></span>
<span class="line"><span style="color:#24292E;">  napi_bigint_expected,</span></span>
<span class="line"><span style="color:#24292E;">  napi_date_expected,</span></span>
<span class="line"><span style="color:#24292E;">  napi_arraybuffer_expected,</span></span>
<span class="line"><span style="color:#24292E;">  napi_detachable_arraybuffer_expected,</span></span>
<span class="line"><span style="color:#24292E;">  napi_would_deadlock,</span><span style="color:#6A737D;">  /* unused */</span></span>
<span class="line"><span style="color:#24292E;">} napi_status;</span></span></code></pre></div><p>The return value will be <code>napi_ok</code> if the request was successful and no uncaught JavaScript exception was thrown. If an error occurred <strong>AND</strong> an exception was thrown, the <code>napi_status</code> value for the error will be returned. If an exception was thrown, and no error occurred, <code>napi_pending_exception</code> will be returned.</p><p>In cases where a return value other than <code>napi_ok</code> or <code>napi_pending_exception</code> is returned, <code>napi_is_exception_pending</code> must be called to check if an exception is pending.</p><div class="language-c vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">c</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">napi_status </span><span style="color:#B392F0;">napi_is_exception_pending</span><span style="color:#E1E4E8;">(napi_env </span><span style="color:#FFAB70;">env</span><span style="color:#E1E4E8;">, </span><span style="color:#F97583;">bool*</span><span style="color:#E1E4E8;"> </span><span style="color:#FFAB70;">result</span><span style="color:#E1E4E8;">);</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">napi_status </span><span style="color:#6F42C1;">napi_is_exception_pending</span><span style="color:#24292E;">(napi_env </span><span style="color:#E36209;">env</span><span style="color:#24292E;">, </span><span style="color:#D73A49;">bool*</span><span style="color:#24292E;"> </span><span style="color:#E36209;">result</span><span style="color:#24292E;">);</span></span></code></pre></div><p>The <code>napi_status</code> return value provides a VM-independent representation of the error which occurred. In some cases it is useful to be able to get more detailed information, including a string representing the error as well as VM (engine)-specific information.</p><p>In order to retrieve this information <code>napi_get_last_error_info</code> is provided which returns a <code>napi_extended_error_info</code> structure.</p><div class="language-c vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">c</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">typedef</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">struct</span><span style="color:#E1E4E8;"> napi_extended_error_info {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">char*</span><span style="color:#E1E4E8;"> error_message;</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">void*</span><span style="color:#E1E4E8;"> engine_reserved;</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">uint32_t</span><span style="color:#E1E4E8;"> engine_error_code;</span></span>
<span class="line"><span style="color:#E1E4E8;">  napi_status error_code;</span></span>
<span class="line"><span style="color:#E1E4E8;">};</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">typedef</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">struct</span><span style="color:#24292E;"> napi_extended_error_info {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">char*</span><span style="color:#24292E;"> error_message;</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">void*</span><span style="color:#24292E;"> engine_reserved;</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">uint32_t</span><span style="color:#24292E;"> engine_error_code;</span></span>
<span class="line"><span style="color:#24292E;">  napi_status error_code;</span></span>
<span class="line"><span style="color:#24292E;">};</span></span></code></pre></div><ul><li><code>error_message</code>: Textual representation of the error that occurred.</li><li><code>engine_reserved</code>: Opaque handle reserved for engine use only.</li><li><code>engine_error_code</code>: VM specific error code.</li><li><code>error_code</code>: Node-API status code for the last error.</li></ul><h3 id="last-error-info" tabindex="-1">Last Error Info <a class="header-anchor" href="#last-error-info" aria-label="Permalink to &quot;Last Error Info&quot;">​</a></h3><p><code>napi_get_last_error_info</code> returns the information for the last Node-API call that was made.</p><div class="language-c vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">c</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">napi_status</span></span>
<span class="line"><span style="color:#B392F0;">napi_get_last_error_info</span><span style="color:#E1E4E8;">(napi_env </span><span style="color:#FFAB70;">env</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">                         </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> napi_extended_error_info</span><span style="color:#F97583;">**</span><span style="color:#E1E4E8;"> </span><span style="color:#FFAB70;">result</span><span style="color:#E1E4E8;">);</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">napi_status</span></span>
<span class="line"><span style="color:#6F42C1;">napi_get_last_error_info</span><span style="color:#24292E;">(napi_env </span><span style="color:#E36209;">env</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">                         </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> napi_extended_error_info</span><span style="color:#D73A49;">**</span><span style="color:#24292E;"> </span><span style="color:#E36209;">result</span><span style="color:#24292E;">);</span></span></code></pre></div><ul><li><code>[in] env</code>: The environment that the API is invoked under.</li><li><code>[out] result</code>: The napi_extended_error_info structure with more information about the error.</li></ul><p>This API retrieves a <code>napi_extended_error_info</code> structure with information about the last error that occurred.</p><p>The content of the <code>napi_extended_error_info</code> returned is only valid up until a Node-API function is called on the same env. This includes a call to <code>napi_is_exception_pending</code> so it may often be necessary to make a copy of the information so that it can be used later. The pointer returned in <code>error_message</code> points to a statically-defined string so it is safe to use that pointer if you have copied it out of the <code>error_message</code> field (which will be overwritten) before another Node-API function was called.</p><p>This API can be called even if there is a pending JavaScript exception.</p><h3 id="helper-macro" tabindex="-1">Helper Macro <a class="header-anchor" href="#helper-macro" aria-label="Permalink to &quot;Helper Macro&quot;">​</a></h3><p>That is why you can see that the <code>NAPI_CALL</code> macro is defined in the hello world example.</p><div class="language-c vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">c</span><pre class="shiki github-dark has-highlighted-lines vp-code-dark"><code><span class="line"><span style="color:#F97583;">#define</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">NAPI_CALL</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">env</span><span style="color:#E1E4E8;">, </span><span style="color:#FFAB70;">the_call</span><span style="color:#E1E4E8;">)                                </span><span style="color:#79B8FF;">\</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">do</span><span style="color:#E1E4E8;"> {                                                          </span><span style="color:#79B8FF;">\</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> ((the_call) </span><span style="color:#F97583;">!=</span><span style="color:#E1E4E8;"> napi_ok) {                                </span><span style="color:#79B8FF;">\</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> napi_extended_error_info </span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;">error_info;               </span><span style="color:#79B8FF;">\</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#B392F0;">napi_get_last_error_info</span><span style="color:#E1E4E8;">((env), </span><span style="color:#F97583;">&amp;</span><span style="color:#E1E4E8;">error_info);             </span><span style="color:#79B8FF;">\</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#F97583;">bool</span><span style="color:#E1E4E8;"> is_pending;                                          </span><span style="color:#79B8FF;">\</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">char*</span><span style="color:#E1E4E8;"> err_message </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> error_info-&gt;error_message;      </span><span style="color:#79B8FF;">\</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#B392F0;">napi_is_exception_pending</span><span style="color:#E1E4E8;">((env), </span><span style="color:#F97583;">&amp;</span><span style="color:#E1E4E8;">is_pending);            </span><span style="color:#79B8FF;">\</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> (</span><span style="color:#F97583;">!</span><span style="color:#E1E4E8;">is_pending) {                                        </span><span style="color:#79B8FF;">\</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">char*</span><span style="color:#E1E4E8;"> error_message </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> err_message </span><span style="color:#F97583;">!=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">NULL</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">?</span><span style="color:#E1E4E8;">       </span><span style="color:#79B8FF;">\</span></span>
<span class="line"><span style="color:#E1E4E8;">          err_message </span><span style="color:#F97583;">:</span><span style="color:#E1E4E8;">                                         </span><span style="color:#79B8FF;">\</span></span>
<span class="line"><span style="color:#E1E4E8;">          </span><span style="color:#9ECBFF;">&quot;empty error message&quot;</span><span style="color:#E1E4E8;">;                                </span><span style="color:#79B8FF;">\</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#B392F0;">napi_throw_error</span><span style="color:#E1E4E8;">((env), </span><span style="color:#79B8FF;">NULL</span><span style="color:#E1E4E8;">, error_message);           </span><span style="color:#79B8FF;">\</span></span>
<span class="line"><span style="color:#E1E4E8;">      }                                                         </span><span style="color:#79B8FF;">\</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">NULL</span><span style="color:#E1E4E8;">;                                              </span><span style="color:#79B8FF;">\</span></span>
<span class="line"><span style="color:#E1E4E8;">    }                                                           </span><span style="color:#79B8FF;">\</span></span>
<span class="line"><span style="color:#E1E4E8;">  } </span><span style="color:#F97583;">while</span><span style="color:#E1E4E8;"> (</span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">napi_value </span><span style="color:#B392F0;">js_function</span><span style="color:#E1E4E8;">(napi_env </span><span style="color:#FFAB70;">env</span><span style="color:#E1E4E8;">, napi_callback_info </span><span style="color:#FFAB70;">info</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;">// ...</span></span>
<span class="line highlighted"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">NAPI_CALL</span><span style="color:#E1E4E8;">(env, </span><span style="color:#B392F0;">napi_create_string_utf8</span><span style="color:#E1E4E8;">(env, str, str_len, </span><span style="color:#F97583;">&amp;</span><span style="color:#E1E4E8;">world));</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;">// ...</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">NAPI_MODULE_INIT</span><span style="color:#E1E4E8;">() {</span></span>
<span class="line"><span style="color:#E1E4E8;">  napi_value hello;</span></span>
<span class="line highlighted"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">NAPI_CALL</span><span style="color:#E1E4E8;">(env, </span><span style="color:#B392F0;">napi_create_function</span><span style="color:#E1E4E8;">(env, </span><span style="color:#9ECBFF;">&quot;hello&quot;</span><span style="color:#E1E4E8;">, NAPI_AUTO_LENGTH,</span></span>
<span class="line highlighted"><span style="color:#E1E4E8;">                                      js_hello, </span><span style="color:#79B8FF;">NULL</span><span style="color:#E1E4E8;">, </span><span style="color:#F97583;">&amp;</span><span style="color:#E1E4E8;">hello));</span></span>
<span class="line highlighted"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">NAPI_CALL</span><span style="color:#E1E4E8;">(env, </span><span style="color:#B392F0;">napi_set_named_property</span><span style="color:#E1E4E8;">(env, exports, </span><span style="color:#9ECBFF;">&quot;hello&quot;</span><span style="color:#E1E4E8;">, hello));</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> exports;</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light has-highlighted-lines vp-code-light"><code><span class="line"><span style="color:#D73A49;">#define</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">NAPI_CALL</span><span style="color:#24292E;">(</span><span style="color:#E36209;">env</span><span style="color:#24292E;">, </span><span style="color:#E36209;">the_call</span><span style="color:#24292E;">)                                </span><span style="color:#005CC5;">\</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">do</span><span style="color:#24292E;"> {                                                          </span><span style="color:#005CC5;">\</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">if</span><span style="color:#24292E;"> ((the_call) </span><span style="color:#D73A49;">!=</span><span style="color:#24292E;"> napi_ok) {                                </span><span style="color:#005CC5;">\</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> napi_extended_error_info </span><span style="color:#D73A49;">*</span><span style="color:#24292E;">error_info;               </span><span style="color:#005CC5;">\</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6F42C1;">napi_get_last_error_info</span><span style="color:#24292E;">((env), </span><span style="color:#D73A49;">&amp;</span><span style="color:#24292E;">error_info);             </span><span style="color:#005CC5;">\</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#D73A49;">bool</span><span style="color:#24292E;"> is_pending;                                          </span><span style="color:#005CC5;">\</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">char*</span><span style="color:#24292E;"> err_message </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> error_info-&gt;error_message;      </span><span style="color:#005CC5;">\</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6F42C1;">napi_is_exception_pending</span><span style="color:#24292E;">((env), </span><span style="color:#D73A49;">&amp;</span><span style="color:#24292E;">is_pending);            </span><span style="color:#005CC5;">\</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#D73A49;">if</span><span style="color:#24292E;"> (</span><span style="color:#D73A49;">!</span><span style="color:#24292E;">is_pending) {                                        </span><span style="color:#005CC5;">\</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">char*</span><span style="color:#24292E;"> error_message </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> err_message </span><span style="color:#D73A49;">!=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">NULL</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">?</span><span style="color:#24292E;">       </span><span style="color:#005CC5;">\</span></span>
<span class="line"><span style="color:#24292E;">          err_message </span><span style="color:#D73A49;">:</span><span style="color:#24292E;">                                         </span><span style="color:#005CC5;">\</span></span>
<span class="line"><span style="color:#24292E;">          </span><span style="color:#032F62;">&quot;empty error message&quot;</span><span style="color:#24292E;">;                                </span><span style="color:#005CC5;">\</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6F42C1;">napi_throw_error</span><span style="color:#24292E;">((env), </span><span style="color:#005CC5;">NULL</span><span style="color:#24292E;">, error_message);           </span><span style="color:#005CC5;">\</span></span>
<span class="line"><span style="color:#24292E;">      }                                                         </span><span style="color:#005CC5;">\</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">NULL</span><span style="color:#24292E;">;                                              </span><span style="color:#005CC5;">\</span></span>
<span class="line"><span style="color:#24292E;">    }                                                           </span><span style="color:#005CC5;">\</span></span>
<span class="line"><span style="color:#24292E;">  } </span><span style="color:#D73A49;">while</span><span style="color:#24292E;"> (</span><span style="color:#005CC5;">0</span><span style="color:#24292E;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">napi_value </span><span style="color:#6F42C1;">js_function</span><span style="color:#24292E;">(napi_env </span><span style="color:#E36209;">env</span><span style="color:#24292E;">, napi_callback_info </span><span style="color:#E36209;">info</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6A737D;">// ...</span></span>
<span class="line highlighted"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">NAPI_CALL</span><span style="color:#24292E;">(env, </span><span style="color:#6F42C1;">napi_create_string_utf8</span><span style="color:#24292E;">(env, str, str_len, </span><span style="color:#D73A49;">&amp;</span><span style="color:#24292E;">world));</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6A737D;">// ...</span></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">NAPI_MODULE_INIT</span><span style="color:#24292E;">() {</span></span>
<span class="line"><span style="color:#24292E;">  napi_value hello;</span></span>
<span class="line highlighted"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">NAPI_CALL</span><span style="color:#24292E;">(env, </span><span style="color:#6F42C1;">napi_create_function</span><span style="color:#24292E;">(env, </span><span style="color:#032F62;">&quot;hello&quot;</span><span style="color:#24292E;">, NAPI_AUTO_LENGTH,</span></span>
<span class="line highlighted"><span style="color:#24292E;">                                      js_hello, </span><span style="color:#005CC5;">NULL</span><span style="color:#24292E;">, </span><span style="color:#D73A49;">&amp;</span><span style="color:#24292E;">hello));</span></span>
<span class="line highlighted"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">NAPI_CALL</span><span style="color:#24292E;">(env, </span><span style="color:#6F42C1;">napi_set_named_property</span><span style="color:#24292E;">(env, exports, </span><span style="color:#032F62;">&quot;hello&quot;</span><span style="color:#24292E;">, hello));</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> exports;</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><h2 id="node-addon-api" tabindex="-1">node-addon-api <a class="header-anchor" href="#node-addon-api" aria-label="Permalink to &quot;node-addon-api&quot;">​</a></h2><div class="warning custom-block"><p class="custom-block-title">WARNING</p><p>You <strong>can not</strong> use node-addon-api if the runtime does not support <code>FinalizationRegistry</code> and <code>WeakRef</code>.</p></div><p>C++ exception is disabled by Emscripten default, but node-addon-api use C++ exceptions by default.</p><p>To enable C++ exception, you should use <code>-sDISABLE_EXCEPTION_CATCHING=0</code>.</p><p>To tell node-addon-api disable C++ exception, you should predefine <code>NAPI_DISABLE_CPP_EXCEPTIONS</code>.</p><p>The <code>Napi::Error</code> is a persistent reference to a JavaScript error object. Use of this class depends on whether C++ exceptions are enabled at compile time.</p><p>If C++ exceptions are enabled, then the <code>Napi::Error</code> class extends <code>std::exception</code> and enables integrated error-handling for C++ exceptions and JavaScript exceptions.</p><p>The following sections explain the approach for each case:</p><ul><li><a href="#handling-errors-with-c-exceptions">Handling Errors With C++ Exceptions</a></li><li><a href="#handling-errors-with-maybe-type-and-c-exceptions-disabled">Handling Errors With Maybe Type and C++ Exceptions Disabled</a></li><li><a href="#handling-errors-without-c-exceptions">Handling Errors Without C++ Exceptions</a></li></ul><p>In most cases when an error occurs, the native code should do whatever cleanup is possible and then return to JavaScript so that the error can be propagated. In less frequent cases the native code may be able to recover from the error, clear the error and then continue.</p><h3 id="handling-errors-with-c-exceptions" tabindex="-1">Handling Errors With C++ Exceptions <a class="header-anchor" href="#handling-errors-with-c-exceptions" aria-label="Permalink to &quot;Handling Errors With C++ Exceptions&quot;">​</a></h3><p>When C++ exceptions are enabled try/catch can be used to catch exceptions thrown from calls to JavaScript and then they can either be handled or rethrown before returning from a native method.</p><p>If a node-addon-api call fails without executing any JavaScript code (for example due to an invalid argument), then node-addon-api automatically converts and throws the error as a C++ exception of type <code>Napi::Error</code>.</p><p>If a JavaScript function called by C++ code via node-addon-api throws a JavaScript exception, then node-addon-api automatically converts and throws it as a C++ exception of type <code>Napi::Error</code> on return from the JavaScript code to the native method.</p><p>If a C++ exception of type <code>Napi::Error</code> escapes from a Node-API C++ callback, then the Node-API wrapper automatically converts and throws it as a JavaScript exception.</p><p>On return from a native method, node-addon-api will automatically convert a pending C++ exception to a JavaScript exception.</p><h3 id="examples-with-c-exceptions-enabled" tabindex="-1">Examples with C++ exceptions enabled <a class="header-anchor" href="#examples-with-c-exceptions-enabled" aria-label="Permalink to &quot;Examples with C++ exceptions enabled&quot;">​</a></h3><h4 id="throwing-a-c-exception" tabindex="-1">Throwing a C++ exception <a class="header-anchor" href="#throwing-a-c-exception" aria-label="Permalink to &quot;Throwing a C++ exception&quot;">​</a></h4><div class="language-cpp vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">cpp</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">Env env </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> ...</span></span>
<span class="line"><span style="color:#F97583;">throw</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Napi</span><span style="color:#E1E4E8;">::</span><span style="color:#B392F0;">Error</span><span style="color:#E1E4E8;">::</span><span style="color:#B392F0;">New</span><span style="color:#E1E4E8;">(env, </span><span style="color:#9ECBFF;">&quot;Example exception&quot;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#6A737D;">// other C++ statements</span></span>
<span class="line"><span style="color:#6A737D;">// ...</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">Env env </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> ...</span></span>
<span class="line"><span style="color:#D73A49;">throw</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Napi</span><span style="color:#24292E;">::</span><span style="color:#6F42C1;">Error</span><span style="color:#24292E;">::</span><span style="color:#6F42C1;">New</span><span style="color:#24292E;">(env, </span><span style="color:#032F62;">&quot;Example exception&quot;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#6A737D;">// other C++ statements</span></span>
<span class="line"><span style="color:#6A737D;">// ...</span></span></code></pre></div><p>The statements following the throw statement will not be executed. The exception will bubble up as a C++ exception of type <code>Napi::Error</code>, until it is either caught while still in C++, or else automatically propagated as a JavaScript exception when returning to JavaScript.</p><h4 id="propagating-a-node-api-c-exception" tabindex="-1">Propagating a Node-API C++ exception <a class="header-anchor" href="#propagating-a-node-api-c-exception" aria-label="Permalink to &quot;Propagating a Node-API C++ exception&quot;">​</a></h4><div class="language-cpp vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">cpp</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">Napi</span><span style="color:#E1E4E8;">::Function jsFunctionThatThrows </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> someValue.As</span><span style="color:#F97583;">&lt;</span><span style="color:#B392F0;">Napi</span><span style="color:#E1E4E8;">::Function</span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#B392F0;">Napi</span><span style="color:#E1E4E8;">::Value result </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">jsFunctionThatThrows</span><span style="color:#E1E4E8;">({ arg1, arg2 });</span></span>
<span class="line"><span style="color:#6A737D;">// other C++ statements</span></span>
<span class="line"><span style="color:#6A737D;">// ...</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">Napi</span><span style="color:#24292E;">::Function jsFunctionThatThrows </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> someValue.As</span><span style="color:#D73A49;">&lt;</span><span style="color:#6F42C1;">Napi</span><span style="color:#24292E;">::Function</span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#6F42C1;">Napi</span><span style="color:#24292E;">::Value result </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">jsFunctionThatThrows</span><span style="color:#24292E;">({ arg1, arg2 });</span></span>
<span class="line"><span style="color:#6A737D;">// other C++ statements</span></span>
<span class="line"><span style="color:#6A737D;">// ...</span></span></code></pre></div><p>The C++ statements following the call to the JavaScript function will not be executed. The exception will bubble up as a C++ exception of type <code>Napi::Error</code>, until it is either caught while still in C++, or else automatically propagated as a JavaScript exception when returning to JavaScript.</p><h4 id="handling-a-node-api-c-exception" tabindex="-1">Handling a Node-API C++ exception <a class="header-anchor" href="#handling-a-node-api-c-exception" aria-label="Permalink to &quot;Handling a Node-API C++ exception&quot;">​</a></h4><div class="language-cpp vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">cpp</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">Napi</span><span style="color:#E1E4E8;">::Function jsFunctionThatThrows </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> someValue.As</span><span style="color:#F97583;">&lt;</span><span style="color:#B392F0;">Napi</span><span style="color:#E1E4E8;">::Function</span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#B392F0;">Napi</span><span style="color:#E1E4E8;">::Value result;</span></span>
<span class="line"><span style="color:#F97583;">try</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">    result </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">jsFunctionThatThrows</span><span style="color:#E1E4E8;">({ arg1, arg2 });</span></span>
<span class="line"><span style="color:#E1E4E8;">} </span><span style="color:#F97583;">catch</span><span style="color:#E1E4E8;"> (</span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Napi</span><span style="color:#E1E4E8;">::Error</span><span style="color:#F97583;">&amp;</span><span style="color:#E1E4E8;"> e) {</span></span>
<span class="line"><span style="color:#E1E4E8;">    cerr </span><span style="color:#F97583;">&lt;&lt;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;Caught JavaScript exception: &quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">+</span><span style="color:#E1E4E8;"> e.</span><span style="color:#B392F0;">what</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">Napi</span><span style="color:#24292E;">::Function jsFunctionThatThrows </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> someValue.As</span><span style="color:#D73A49;">&lt;</span><span style="color:#6F42C1;">Napi</span><span style="color:#24292E;">::Function</span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#6F42C1;">Napi</span><span style="color:#24292E;">::Value result;</span></span>
<span class="line"><span style="color:#D73A49;">try</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">    result </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">jsFunctionThatThrows</span><span style="color:#24292E;">({ arg1, arg2 });</span></span>
<span class="line"><span style="color:#24292E;">} </span><span style="color:#D73A49;">catch</span><span style="color:#24292E;"> (</span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Napi</span><span style="color:#24292E;">::Error</span><span style="color:#D73A49;">&amp;</span><span style="color:#24292E;"> e) {</span></span>
<span class="line"><span style="color:#24292E;">    cerr </span><span style="color:#D73A49;">&lt;&lt;</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;Caught JavaScript exception: &quot;</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> e.</span><span style="color:#6F42C1;">what</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><p>Since the exception was caught here, it will not be propagated as a JavaScript exception.</p><h3 id="handling-errors-with-maybe-type-and-c-exceptions-disabled" tabindex="-1">Handling Errors With Maybe Type and C++ Exceptions Disabled <a class="header-anchor" href="#handling-errors-with-maybe-type-and-c-exceptions-disabled" aria-label="Permalink to &quot;Handling Errors With Maybe Type and C++ Exceptions Disabled&quot;">​</a></h3><p>If you decide to use node-addon-api without C++ exceptions enabled, please consider enabling node-addon-api safe API type guards by predefining <code>NODE_ADDON_API_ENABLE_MAYBE</code> to ensure the proper exception handling pattern.</p><p>If C++ exceptions are disabled, then the <code>Napi::Error</code> class does not extend <code>std::exception</code>. This means that any calls to node-addon-api functions do not throw a C++ exceptions. Instead, these node-api functions that call into JavaScript are returning with <code>Maybe</code> boxed values. In that case, the calling side should convert the <code>Maybe</code> boxed values with checks to ensure that the call did succeed and therefore no exception is pending. If the check fails, that is to say, the returning value is <em>empty</em>, the calling side should determine what to do with <code>env.GetAndClearPendingException()</code> before attempting to call another node-api.</p><p>The conversion from the <code>Maybe</code> boxed value to the actual return value is enforced by compilers so that the exceptions must be properly handled before continuing.</p><h3 id="examples-with-maybe-type-and-c-exceptions-disabled" tabindex="-1">Examples with Maybe Type and C++ exceptions disabled <a class="header-anchor" href="#examples-with-maybe-type-and-c-exceptions-disabled" aria-label="Permalink to &quot;Examples with Maybe Type and C++ exceptions disabled&quot;">​</a></h3><h4 id="throwing-a-js-exception" tabindex="-1">Throwing a JS exception <a class="header-anchor" href="#throwing-a-js-exception" aria-label="Permalink to &quot;Throwing a JS exception&quot;">​</a></h4><div class="language-cpp vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">cpp</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">Napi</span><span style="color:#E1E4E8;">::Env env </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> ...</span></span>
<span class="line"><span style="color:#B392F0;">Napi</span><span style="color:#E1E4E8;">::</span><span style="color:#B392F0;">Error</span><span style="color:#E1E4E8;">::</span><span style="color:#B392F0;">New</span><span style="color:#E1E4E8;">(env, </span><span style="color:#9ECBFF;">&quot;Example exception&quot;</span><span style="color:#E1E4E8;">).</span><span style="color:#B392F0;">ThrowAsJavaScriptException</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#F97583;">return</span><span style="color:#E1E4E8;">;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">Napi</span><span style="color:#24292E;">::Env env </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> ...</span></span>
<span class="line"><span style="color:#6F42C1;">Napi</span><span style="color:#24292E;">::</span><span style="color:#6F42C1;">Error</span><span style="color:#24292E;">::</span><span style="color:#6F42C1;">New</span><span style="color:#24292E;">(env, </span><span style="color:#032F62;">&quot;Example exception&quot;</span><span style="color:#24292E;">).</span><span style="color:#6F42C1;">ThrowAsJavaScriptException</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#D73A49;">return</span><span style="color:#24292E;">;</span></span></code></pre></div><p>After throwing a JavaScript exception, the code should generally return immediately from the native callback, after performing any necessary cleanup.</p><h4 id="propagating-a-node-api-js-exception" tabindex="-1">Propagating a Node-API JS exception <a class="header-anchor" href="#propagating-a-node-api-js-exception" aria-label="Permalink to &quot;Propagating a Node-API JS exception&quot;">​</a></h4><div class="language-cpp vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">cpp</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">Napi</span><span style="color:#E1E4E8;">::Env env </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> ...</span></span>
<span class="line"><span style="color:#B392F0;">Napi</span><span style="color:#E1E4E8;">::Function jsFunctionThatThrows </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> someValue.As</span><span style="color:#F97583;">&lt;</span><span style="color:#B392F0;">Napi</span><span style="color:#E1E4E8;">::Function</span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#E1E4E8;">Maybe</span><span style="color:#F97583;">&lt;</span><span style="color:#B392F0;">Napi</span><span style="color:#E1E4E8;">::Value</span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;"> maybeResult </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">jsFunctionThatThrows</span><span style="color:#E1E4E8;">({ arg1, arg2 });</span></span>
<span class="line"><span style="color:#B392F0;">Napi</span><span style="color:#E1E4E8;">::Value result;</span></span>
<span class="line"><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> (</span><span style="color:#F97583;">!</span><span style="color:#E1E4E8;">maybeResult.</span><span style="color:#B392F0;">To</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">&amp;</span><span style="color:#E1E4E8;">result)) {</span></span>
<span class="line"><span style="color:#6A737D;">    // The Maybe is empty, calling into js failed, cleaning up...</span></span>
<span class="line"><span style="color:#6A737D;">    // It is recommended to return an empty Maybe if the procedure failed.</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> result;</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">Napi</span><span style="color:#24292E;">::Env env </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> ...</span></span>
<span class="line"><span style="color:#6F42C1;">Napi</span><span style="color:#24292E;">::Function jsFunctionThatThrows </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> someValue.As</span><span style="color:#D73A49;">&lt;</span><span style="color:#6F42C1;">Napi</span><span style="color:#24292E;">::Function</span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">Maybe</span><span style="color:#D73A49;">&lt;</span><span style="color:#6F42C1;">Napi</span><span style="color:#24292E;">::Value</span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;"> maybeResult </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">jsFunctionThatThrows</span><span style="color:#24292E;">({ arg1, arg2 });</span></span>
<span class="line"><span style="color:#6F42C1;">Napi</span><span style="color:#24292E;">::Value result;</span></span>
<span class="line"><span style="color:#D73A49;">if</span><span style="color:#24292E;"> (</span><span style="color:#D73A49;">!</span><span style="color:#24292E;">maybeResult.</span><span style="color:#6F42C1;">To</span><span style="color:#24292E;">(</span><span style="color:#D73A49;">&amp;</span><span style="color:#24292E;">result)) {</span></span>
<span class="line"><span style="color:#6A737D;">    // The Maybe is empty, calling into js failed, cleaning up...</span></span>
<span class="line"><span style="color:#6A737D;">    // It is recommended to return an empty Maybe if the procedure failed.</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> result;</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><p>If <code>maybeResult.To(&amp;result)</code> returns false a JavaScript exception is pending. To let the exception propagate, the code should generally return immediately from the native callback, after performing any necessary cleanup.</p><h4 id="handling-a-node-api-js-exception" tabindex="-1">Handling a Node-API JS exception <a class="header-anchor" href="#handling-a-node-api-js-exception" aria-label="Permalink to &quot;Handling a Node-API JS exception&quot;">​</a></h4><div class="language-cpp vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">cpp</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">Napi</span><span style="color:#E1E4E8;">::Env env </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> ...</span></span>
<span class="line"><span style="color:#B392F0;">Napi</span><span style="color:#E1E4E8;">::Function jsFunctionThatThrows </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> someValue.As</span><span style="color:#F97583;">&lt;</span><span style="color:#B392F0;">Napi</span><span style="color:#E1E4E8;">::Function</span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#E1E4E8;">Maybe</span><span style="color:#F97583;">&lt;</span><span style="color:#B392F0;">Napi</span><span style="color:#E1E4E8;">::Value</span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;"> maybeResult </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">jsFunctionThatThrows</span><span style="color:#E1E4E8;">({ arg1, arg2 });</span></span>
<span class="line"><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> (maybeResult.</span><span style="color:#B392F0;">IsNothing</span><span style="color:#E1E4E8;">()) {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">Napi</span><span style="color:#E1E4E8;">::Error e </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> env.</span><span style="color:#B392F0;">GetAndClearPendingException</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#E1E4E8;">    cerr </span><span style="color:#F97583;">&lt;&lt;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;Caught JavaScript exception: &quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">+</span><span style="color:#E1E4E8;"> e.</span><span style="color:#B392F0;">Message</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">Napi</span><span style="color:#24292E;">::Env env </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> ...</span></span>
<span class="line"><span style="color:#6F42C1;">Napi</span><span style="color:#24292E;">::Function jsFunctionThatThrows </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> someValue.As</span><span style="color:#D73A49;">&lt;</span><span style="color:#6F42C1;">Napi</span><span style="color:#24292E;">::Function</span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">Maybe</span><span style="color:#D73A49;">&lt;</span><span style="color:#6F42C1;">Napi</span><span style="color:#24292E;">::Value</span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;"> maybeResult </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">jsFunctionThatThrows</span><span style="color:#24292E;">({ arg1, arg2 });</span></span>
<span class="line"><span style="color:#D73A49;">if</span><span style="color:#24292E;"> (maybeResult.</span><span style="color:#6F42C1;">IsNothing</span><span style="color:#24292E;">()) {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6F42C1;">Napi</span><span style="color:#24292E;">::Error e </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> env.</span><span style="color:#6F42C1;">GetAndClearPendingException</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">    cerr </span><span style="color:#D73A49;">&lt;&lt;</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;Caught JavaScript exception: &quot;</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> e.</span><span style="color:#6F42C1;">Message</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><p>Since the exception was cleared here, it will not be propagated as a JavaScript exception after the native callback returns.</p><h3 id="handling-errors-without-c-exceptions" tabindex="-1">Handling Errors Without C++ Exceptions <a class="header-anchor" href="#handling-errors-without-c-exceptions" aria-label="Permalink to &quot;Handling Errors Without C++ Exceptions&quot;">​</a></h3><p>If C++ exceptions are disabled, then the <code>Napi::Error</code> class does not extend <code>std::exception</code>. This means that any calls to node-addon-api function do not throw a C++ exceptions. Instead, it raises <em>pending</em> JavaScript exceptions and returns an <em>empty</em> <code>Napi::Value</code>. The calling code should check <code>env.IsExceptionPending()</code> before attempting to use a returned value, and may use methods on the <code>Napi::Env</code> class to check for, get, and clear a pending JavaScript exception. If the pending exception is not cleared, it will be thrown when the native code returns to JavaScript.</p><h3 id="examples-with-c-exceptions-disabled" tabindex="-1">Examples with C++ exceptions disabled <a class="header-anchor" href="#examples-with-c-exceptions-disabled" aria-label="Permalink to &quot;Examples with C++ exceptions disabled&quot;">​</a></h3><h4 id="throwing-a-js-exception-1" tabindex="-1">Throwing a JS exception <a class="header-anchor" href="#throwing-a-js-exception-1" aria-label="Permalink to &quot;Throwing a JS exception&quot;">​</a></h4><div class="language-cpp vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">cpp</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">Napi</span><span style="color:#E1E4E8;">::Env env </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> ...</span></span>
<span class="line"><span style="color:#B392F0;">Napi</span><span style="color:#E1E4E8;">::</span><span style="color:#B392F0;">Error</span><span style="color:#E1E4E8;">::</span><span style="color:#B392F0;">New</span><span style="color:#E1E4E8;">(env, </span><span style="color:#9ECBFF;">&quot;Example exception&quot;</span><span style="color:#E1E4E8;">).</span><span style="color:#B392F0;">ThrowAsJavaScriptException</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#F97583;">return</span><span style="color:#E1E4E8;">;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">Napi</span><span style="color:#24292E;">::Env env </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> ...</span></span>
<span class="line"><span style="color:#6F42C1;">Napi</span><span style="color:#24292E;">::</span><span style="color:#6F42C1;">Error</span><span style="color:#24292E;">::</span><span style="color:#6F42C1;">New</span><span style="color:#24292E;">(env, </span><span style="color:#032F62;">&quot;Example exception&quot;</span><span style="color:#24292E;">).</span><span style="color:#6F42C1;">ThrowAsJavaScriptException</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#D73A49;">return</span><span style="color:#24292E;">;</span></span></code></pre></div><p>After throwing a JavaScript exception, the code should generally return immediately from the native callback, after performing any necessary cleanup.</p><h3 id="propagating-a-node-api-js-exception-1" tabindex="-1">Propagating a Node-API JS exception <a class="header-anchor" href="#propagating-a-node-api-js-exception-1" aria-label="Permalink to &quot;Propagating a Node-API JS exception&quot;">​</a></h3><div class="language-cpp vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">cpp</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">Napi</span><span style="color:#E1E4E8;">::Env env </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> ...</span></span>
<span class="line"><span style="color:#B392F0;">Napi</span><span style="color:#E1E4E8;">::Function jsFunctionThatThrows </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> someValue.As</span><span style="color:#F97583;">&lt;</span><span style="color:#B392F0;">Napi</span><span style="color:#E1E4E8;">::Function</span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#B392F0;">Napi</span><span style="color:#E1E4E8;">::Value result </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">jsFunctionThatThrows</span><span style="color:#E1E4E8;">({ arg1, arg2 });</span></span>
<span class="line"><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> (env.</span><span style="color:#B392F0;">IsExceptionPending</span><span style="color:#E1E4E8;">()) {</span></span>
<span class="line"><span style="color:#E1E4E8;">    Error e </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> env.</span><span style="color:#B392F0;">GetAndClearPendingException</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> e.</span><span style="color:#B392F0;">Value</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">Napi</span><span style="color:#24292E;">::Env env </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> ...</span></span>
<span class="line"><span style="color:#6F42C1;">Napi</span><span style="color:#24292E;">::Function jsFunctionThatThrows </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> someValue.As</span><span style="color:#D73A49;">&lt;</span><span style="color:#6F42C1;">Napi</span><span style="color:#24292E;">::Function</span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#6F42C1;">Napi</span><span style="color:#24292E;">::Value result </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">jsFunctionThatThrows</span><span style="color:#24292E;">({ arg1, arg2 });</span></span>
<span class="line"><span style="color:#D73A49;">if</span><span style="color:#24292E;"> (env.</span><span style="color:#6F42C1;">IsExceptionPending</span><span style="color:#24292E;">()) {</span></span>
<span class="line"><span style="color:#24292E;">    Error e </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> env.</span><span style="color:#6F42C1;">GetAndClearPendingException</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> e.</span><span style="color:#6F42C1;">Value</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><p>If <code>env.IsExceptionPending()</code> returns true a JavaScript exception is pending. To let the exception propagate, the code should generally return immediately from the native callback, after performing any necessary cleanup.</p><h4 id="handling-a-node-api-js-exception-1" tabindex="-1">Handling a Node-API JS exception <a class="header-anchor" href="#handling-a-node-api-js-exception-1" aria-label="Permalink to &quot;Handling a Node-API JS exception&quot;">​</a></h4><div class="language-cpp vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">cpp</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">Napi</span><span style="color:#E1E4E8;">::Env env </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> ...</span></span>
<span class="line"><span style="color:#B392F0;">Napi</span><span style="color:#E1E4E8;">::Function jsFunctionThatThrows </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> someValue.As</span><span style="color:#F97583;">&lt;</span><span style="color:#B392F0;">Napi</span><span style="color:#E1E4E8;">::Function</span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#B392F0;">Napi</span><span style="color:#E1E4E8;">::Value result </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">jsFunctionThatThrows</span><span style="color:#E1E4E8;">({ arg1, arg2 });</span></span>
<span class="line"><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> (env.</span><span style="color:#B392F0;">IsExceptionPending</span><span style="color:#E1E4E8;">()) {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">Napi</span><span style="color:#E1E4E8;">::Error e </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> env.</span><span style="color:#B392F0;">GetAndClearPendingException</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#E1E4E8;">    cerr </span><span style="color:#F97583;">&lt;&lt;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;Caught JavaScript exception: &quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">+</span><span style="color:#E1E4E8;"> e.</span><span style="color:#B392F0;">Message</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">Napi</span><span style="color:#24292E;">::Env env </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> ...</span></span>
<span class="line"><span style="color:#6F42C1;">Napi</span><span style="color:#24292E;">::Function jsFunctionThatThrows </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> someValue.As</span><span style="color:#D73A49;">&lt;</span><span style="color:#6F42C1;">Napi</span><span style="color:#24292E;">::Function</span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#6F42C1;">Napi</span><span style="color:#24292E;">::Value result </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">jsFunctionThatThrows</span><span style="color:#24292E;">({ arg1, arg2 });</span></span>
<span class="line"><span style="color:#D73A49;">if</span><span style="color:#24292E;"> (env.</span><span style="color:#6F42C1;">IsExceptionPending</span><span style="color:#24292E;">()) {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6F42C1;">Napi</span><span style="color:#24292E;">::Error e </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> env.</span><span style="color:#6F42C1;">GetAndClearPendingException</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">    cerr </span><span style="color:#D73A49;">&lt;&lt;</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;Caught JavaScript exception: &quot;</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> e.</span><span style="color:#6F42C1;">Message</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><p>Since the exception was cleared here, it will not be propagated as a JavaScript exception after the native callback returns.</p><h3 id="calling-node-api-directly" tabindex="-1">Calling Node-API directly <a class="header-anchor" href="#calling-node-api-directly" aria-label="Permalink to &quot;Calling Node-API directly&quot;">​</a></h3><p><strong>node-addon-api</strong> provides macros for throwing errors in response to non-OK <code>napi_status</code> results when calling Node-API functions. These macros are defined differently depending on whether C++ exceptions are enabled or not, but are available for use in either case.</p><h4 id="napi-throw-e" tabindex="-1"><code>NAPI_THROW(e, ...)</code> <a class="header-anchor" href="#napi-throw-e" aria-label="Permalink to &quot;`NAPI_THROW(e, ...)`&quot;">​</a></h4><p>This macro accepts a <code>Napi::Error</code>, throws it, and returns the value given as the last parameter. If C++ exceptions are enabled (by defining <code>NAPI_CPP_EXCEPTIONS</code> during the build), the return value will be ignored.</p><h4 id="napi-throw-if-failed-env-status" tabindex="-1"><code>NAPI_THROW_IF_FAILED(env, status, ...)</code> <a class="header-anchor" href="#napi-throw-if-failed-env-status" aria-label="Permalink to &quot;`NAPI_THROW_IF_FAILED(env, status, ...)`&quot;">​</a></h4><p>This macro accepts a <code>Napi::Env</code> and a <code>napi_status</code>. It constructs an error from the <code>napi_status</code>, throws it, and returns the value given as the last parameter. If C++ exceptions are enabled (by defining <code>NAPI_CPP_EXCEPTIONS</code> during the build), the return value will be ignored.</p><h4 id="napi-throw-if-failed-void-env-status" tabindex="-1"><code>NAPI_THROW_IF_FAILED_VOID(env, status)</code> <a class="header-anchor" href="#napi-throw-if-failed-void-env-status" aria-label="Permalink to &quot;`NAPI_THROW_IF_FAILED_VOID(env, status)`&quot;">​</a></h4><p>This macro accepts a <code>Napi::Env</code> and a <code>napi_status</code>. It constructs an error from the <code>napi_status</code>, throws it, and returns.</p><h4 id="napi-fatal-if-failed-status-location-message" tabindex="-1"><code>NAPI_FATAL_IF_FAILED(status, location, message)</code> <a class="header-anchor" href="#napi-fatal-if-failed-status-location-message" aria-label="Permalink to &quot;`NAPI_FATAL_IF_FAILED(status, location, message)`&quot;">​</a></h4><p>This macro accepts a <code>napi_status</code>, a C string indicating the location where the error occurred, and a second C string for the message to display.</p></div></div></main><footer class="VPDocFooter" data-v-6b87e69f data-v-ef5dee53><!--[--><!--]--><div class="edit-info" data-v-ef5dee53><div class="edit-link" data-v-ef5dee53><a class="VPLink link vp-external-link-icon no-icon edit-link-button" href="https://github.com/toyobayashi/emnapi-docs/edit/main/src/guide/error-handling.md" target="_blank" rel="noreferrer" data-v-ef5dee53><!--[--><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="edit-link-icon" aria-label="edit icon" data-v-ef5dee53><path d="M18,23H4c-1.7,0-3-1.3-3-3V6c0-1.7,1.3-3,3-3h7c0.6,0,1,0.4,1,1s-0.4,1-1,1H4C3.4,5,3,5.4,3,6v14c0,0.6,0.4,1,1,1h14c0.6,0,1-0.4,1-1v-7c0-0.6,0.4-1,1-1s1,0.4,1,1v7C21,21.7,19.7,23,18,23z"></path><path d="M8,17c-0.3,0-0.5-0.1-0.7-0.3C7,16.5,6.9,16.1,7,15.8l1-4c0-0.2,0.1-0.3,0.3-0.5l9.5-9.5c1.2-1.2,3.2-1.2,4.4,0c1.2,1.2,1.2,3.2,0,4.4l-9.5,9.5c-0.1,0.1-0.3,0.2-0.5,0.3l-4,1C8.2,17,8.1,17,8,17zM9.9,12.5l-0.5,2.1l2.1-0.5l9.3-9.3c0.4-0.4,0.4-1.1,0-1.6c-0.4-0.4-1.2-0.4-1.6,0l0,0L9.9,12.5z M18.5,2.5L18.5,2.5L18.5,2.5z"></path></svg> Any mistake found? Correct it now!<!--]--></a></div><div class="last-updated" data-v-ef5dee53><p class="VPLastUpdated" data-v-ef5dee53 data-v-7e05ebdb>Last Updated: <time datetime="2023-11-10T09:14:20.000Z" data-v-7e05ebdb></time></p></div></div><nav class="prev-next" data-v-ef5dee53><div class="pager" data-v-ef5dee53><a class="pager-link prev" href="/emnapi-docs/guide/using-rust.html" data-v-ef5dee53><span class="desc" data-v-ef5dee53>Previous page</span><span class="title" data-v-ef5dee53>Using Rust (Experimental)</span></a></div><div class="pager" data-v-ef5dee53><a class="pager-link next" href="/emnapi-docs/guide/function-binding.html" data-v-ef5dee53><span class="desc" data-v-ef5dee53>Next page</span><span class="title" data-v-ef5dee53>Function Binding</span></a></div></nav></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><footer class="VPFooter has-sidebar" data-v-5a346dfe data-v-e03eb2e1><div class="container" data-v-e03eb2e1><p class="message" data-v-e03eb2e1>Released under the MIT License.</p><p class="copyright" data-v-e03eb2e1>Copyright © 2021-PRESENT toyobayashi</p></div></footer><!--[--><!--]--></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"zh_reference_additional.md\":\"1b9ba484\",\"zh_reference_list.md\":\"11bd98aa\",\"guide_class-binding.md\":\"3c61907c\",\"zh_guide_tsfn.md\":\"97bc27ad\",\"zh_guide_multithreaded-async.md\":\"c4c29eb4\",\"guide_faq.md\":\"3e471b47\",\"zh_guide_using-cmake.md\":\"7a4e7a1c\",\"guide_tsfn.md\":\"528063ca\",\"zh_guide_using-rust.md\":\"9db0f623\",\"zh_guide_modularization.md\":\"adb5f8af\",\"guide_using-cpp.md\":\"5b7bf156\",\"zh_guide_using-cpp.md\":\"85cafce3\",\"guide_function-binding.md\":\"67ea3b6f\",\"reference_list.md\":\"41e9d306\",\"guide_modularization.md\":\"b0453195\",\"zh_guide_class-binding.md\":\"fabab18b\",\"zh_guide_error-handling.md\":\"e432b34a\",\"zh_guide_faq.md\":\"026a25ca\",\"zh_guide_function-binding.md\":\"0ff0df0a\",\"zh_guide_index.md\":\"209f9bdc\",\"guide_getting-started.md\":\"e737ddc2\",\"guide_index.md\":\"73bafacb\",\"guide_multithreaded-async.md\":\"fc16b463\",\"guide_error-handling.md\":\"ea0d57ee\",\"guide_using-cmake.md\":\"0f10977f\",\"guide_using-rust.md\":\"9e783a93\",\"index.md\":\"60cc90c7\",\"reference_additional.md\":\"8303a3fb\",\"zh_guide_getting-started.md\":\"8141d881\",\"zh_index.md\":\"1385929a\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"en-US\",\"dir\":\"ltr\",\"title\":\"emnapi\",\"description\":\"emnapi - The Subset of Node-API implementation for WebAssembly\",\"base\":\"/emnapi-docs/\",\"head\":[],\"appearance\":true,\"themeConfig\":{\"logo\":\"/emnapi.svg\",\"footer\":{\"message\":\"Released under the MIT License.\",\"copyright\":\"Copyright © 2021-PRESENT toyobayashi\"},\"socialLinks\":[{\"icon\":\"github\",\"link\":\"https://github.com/toyobayashi/emnapi\"}],\"algolia\":{\"appId\":\"0UYMT1XPL1\",\"apiKey\":\"93bb252b942dac8d9c4e6e8432d1ab99\",\"indexName\":\"emnapi\"}},\"locales\":{\"root\":{\"lang\":\"en\",\"label\":\"English\",\"description\":\"emnapi - The Subset of Node-API implementation for WebAssembly\",\"themeConfig\":{\"lastUpdatedText\":\"Last Updated\",\"editLink\":{\"pattern\":\"https://github.com/toyobayashi/emnapi-docs/edit/main/src/:path\",\"text\":\"Any mistake found? Correct it now!\"},\"nav\":[{\"text\":\"Guide\",\"link\":\"//guide/\",\"activeMatch\":\"^/(\\\\S+/)?guide/\"},{\"text\":\"Examples\",\"link\":\"https://github.com/toyobayashi/node-addon-examples\"},{\"text\":\"Docs Repo\",\"link\":\"https://github.com/toyobayashi/emnapi-docs\"}],\"sidebar\":{\"/guide/\":[{\"text\":\"Guide\",\"items\":[{\"text\":\"Introduction\",\"link\":\"/guide/\"},{\"text\":\"Getting Started\",\"link\":\"/guide/getting-started\"},{\"text\":\"Using C++ and node-addon-api\",\"link\":\"/guide/using-cpp\"},{\"text\":\"Using CMake\",\"link\":\"/guide/using-cmake\"},{\"text\":\"Using Rust (Experimental)\",\"link\":\"/guide/using-rust\"},{\"text\":\"Error Handling\",\"link\":\"/guide/error-handling\"},{\"text\":\"Function Binding\",\"link\":\"/guide/function-binding\"},{\"text\":\"Class Binding\",\"link\":\"/guide/class-binding\"}]},{\"text\":\"Advanced\",\"items\":[{\"text\":\"Modularization\",\"link\":\"/guide/modularization\"},{\"text\":\"Multithreaded Asynchronous Operations\",\"link\":\"/guide/multithreaded-async\"},{\"text\":\"Thread Safe Function\",\"link\":\"/guide/tsfn\"},{\"text\":\"FAQ\",\"link\":\"/guide/faq\"}]},{\"text\":\"API\",\"items\":[{\"text\":\"API List\",\"link\":\"/reference/list\"},{\"text\":\"Additional APIs\",\"link\":\"/reference/additional\"}]}],\"/\":[{\"text\":\"Guide\",\"items\":[{\"text\":\"Introduction\",\"link\":\"/guide/\"},{\"text\":\"Getting Started\",\"link\":\"/guide/getting-started\"},{\"text\":\"Using C++ and node-addon-api\",\"link\":\"/guide/using-cpp\"},{\"text\":\"Using CMake\",\"link\":\"/guide/using-cmake\"},{\"text\":\"Using Rust (Experimental)\",\"link\":\"/guide/using-rust\"},{\"text\":\"Error Handling\",\"link\":\"/guide/error-handling\"},{\"text\":\"Function Binding\",\"link\":\"/guide/function-binding\"},{\"text\":\"Class Binding\",\"link\":\"/guide/class-binding\"}]},{\"text\":\"Advanced\",\"items\":[{\"text\":\"Modularization\",\"link\":\"/guide/modularization\"},{\"text\":\"Multithreaded Asynchronous Operations\",\"link\":\"/guide/multithreaded-async\"},{\"text\":\"Thread Safe Function\",\"link\":\"/guide/tsfn\"},{\"text\":\"FAQ\",\"link\":\"/guide/faq\"}]},{\"text\":\"API\",\"items\":[{\"text\":\"API List\",\"link\":\"/reference/list\"},{\"text\":\"Additional APIs\",\"link\":\"/reference/additional\"}]}]}}},\"zh\":{\"lang\":\"zh\",\"label\":\"简体中文\",\"description\":\"emnapi - 适用于 WebAssembly 的 Node-API 子集实现\",\"themeConfig\":{\"lastUpdatedText\":\"上次更新于\",\"editLink\":{\"pattern\":\"https://github.com/toyobayashi/emnapi-docs/edit/main/src/:path\",\"text\":\"在 Github 上编辑本页\"},\"nav\":[{\"text\":\"指南\",\"link\":\"/zh//guide/\",\"activeMatch\":\"^/(\\\\S+/)?guide/\"},{\"text\":\"代码示例\",\"link\":\"https://github.com/toyobayashi/node-addon-examples\"},{\"text\":\"文档仓库\",\"link\":\"https://github.com/toyobayashi/emnapi-docs\"}],\"sidebar\":{\"/zh/guide/\":[{\"text\":\"指南\",\"items\":[{\"text\":\"介绍\",\"link\":\"/zh/guide/\"},{\"text\":\"开始使用\",\"link\":\"/zh/guide/getting-started\"},{\"text\":\"使用 C++ 和 node-addon-api\",\"link\":\"/zh/guide/using-cpp\"},{\"text\":\"使用 CMake\",\"link\":\"/zh/guide/using-cmake\"},{\"text\":\"使用 Rust（实验性）\",\"link\":\"/zh/guide/using-rust\"},{\"text\":\"错误处理\",\"link\":\"/zh/guide/error-handling\"},{\"text\":\"函数绑定\",\"link\":\"/zh/guide/function-binding\"},{\"text\":\"类绑定\",\"link\":\"/zh/guide/class-binding\"}]},{\"text\":\"进阶\",\"items\":[{\"text\":\"模块化\",\"link\":\"/zh/guide/modularization\"},{\"text\":\"多线程异步\",\"link\":\"/zh/guide/multithreaded-async\"},{\"text\":\"线程安全函数\",\"link\":\"/zh/guide/tsfn\"},{\"text\":\"常见问题\",\"link\":\"/zh/guide/faq\"}]},{\"text\":\"API\",\"items\":[{\"text\":\"API 列表\",\"link\":\"/zh/reference/list\"},{\"text\":\"额外新增的 API\",\"link\":\"/zh/reference/additional\"}]}],\"/zh/\":[{\"text\":\"指南\",\"items\":[{\"text\":\"介绍\",\"link\":\"/zh/guide/\"},{\"text\":\"开始使用\",\"link\":\"/zh/guide/getting-started\"},{\"text\":\"使用 C++ 和 node-addon-api\",\"link\":\"/zh/guide/using-cpp\"},{\"text\":\"使用 CMake\",\"link\":\"/zh/guide/using-cmake\"},{\"text\":\"使用 Rust（实验性）\",\"link\":\"/zh/guide/using-rust\"},{\"text\":\"错误处理\",\"link\":\"/zh/guide/error-handling\"},{\"text\":\"函数绑定\",\"link\":\"/zh/guide/function-binding\"},{\"text\":\"类绑定\",\"link\":\"/zh/guide/class-binding\"}]},{\"text\":\"进阶\",\"items\":[{\"text\":\"模块化\",\"link\":\"/zh/guide/modularization\"},{\"text\":\"多线程异步\",\"link\":\"/zh/guide/multithreaded-async\"},{\"text\":\"线程安全函数\",\"link\":\"/zh/guide/tsfn\"},{\"text\":\"常见问题\",\"link\":\"/zh/guide/faq\"}]},{\"text\":\"API\",\"items\":[{\"text\":\"API 列表\",\"link\":\"/zh/reference/list\"},{\"text\":\"额外新增的 API\",\"link\":\"/zh/reference/additional\"}]}]}}}},\"scrollOffset\":\"header\",\"cleanUrls\":false}");</script>
    
  </body>
</html>